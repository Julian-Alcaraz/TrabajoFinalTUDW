<div class="card">
  <span class="card-header">Cargar una nueva consulta medica clinica</span>
  <div class="card-body">
    <form (ngSubmit)="enviarFormulario()" [formGroup]="clinicaForm">
      <app-campos-comunes [form]="clinicaForm" />
      <div class="grid gap-6 md:grid-cols-6 sm:grid-cols-3">
        <!-- Peso -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Peso (kg)" [control]="controlDeInput('peso')" placeholder="" idInput="peso" />
        </div>
        <!-- Talla -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Talla (cm)" [control]="controlDeInput('talla')" placeholder="" idInput="talla" />
        </div>
        <!-- Circunferencia de la cintura (cc)-->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Circunferencia de la cintura" [control]="controlDeInput('cc')" placeholder=""
            idInput="cc" />
        </div>
        <!-- Percentil de Tension Arterial (PCTA) -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Percentil de Tension Arterial" [control]="controlDeInput('pcta')" placeholder=""
            idInput="pcta" />
        </div>
        <!-- Percentil de Talla (PCT) -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Percentil de Talla (T/E)" [control]="controlDeInput('pct')" placeholder=""
            idInput="pct" />
        </div>
        <!-- Percentil de Índice de Masa Corporal (PCIMC) -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Percentil de Índice de Masa Corporal" [control]="controlDeInput('pcimc')"
            placeholder="" idInput="pcimc" />
        </div>
        <!-- Calculos -->
        <ng-container class="mt-4">
          <div
            *ngIf="(clinicaForm.get('talla')?.value > 0 && clinicaForm.get('peso')?.value > 0) || clinicaForm.get('pcimc')?.value > 0 || clinicaForm.get('pcta')?.value > 0"
            class="bg-yellow-100 border border-yellow-300 text-sm p-4 rounded-lg w-full md:col-span-6">
            <!-- Calculo IMC (TALLA y PESO) -->
            <ng-container
              *ngIf="clinicaForm.get('talla')?.value !== null && clinicaForm.get('talla')?.value !== '' && clinicaForm.get('talla')?.value > 0 && clinicaForm.get('peso')?.value !== '' && clinicaForm.get('peso')?.value !== null && clinicaForm.get('peso')?.value > 0">
              <div class="md:col-span-6 sm:col-span-3">
                <span class="font-bold">IMC: </span>{{ calcularImc(clinicaForm.get('peso')?.value,
                clinicaForm.get('talla')?.value) | number: '1.2-2' }}
              </div>
            </ng-container>
            <!-- Calculo estado nutricional (PCIMC)-->
            <ng-container
              *ngIf="clinicaForm.get('pcimc')?.value !== null && clinicaForm.get('pcimc')?.value !== '' && clinicaForm.get('pcimc')?.value > 0">
              <div class="md:col-span-6 sm:col-span-3">
                <span class="font-bold">Estado nutricional:
                </span><span>{{ calcularEstadoNutricional(clinicaForm.get('pcimc')?.value) }}</span>
              </div>
            </ng-container>
            <!-- Calculo tension arterial (PCTA) -->
            <ng-container
              *ngIf="clinicaForm.get('pcta')?.value !== null && clinicaForm.get('pcta')?.value !== '' && clinicaForm.get('pcta')?.value > 0">
              <div class="md:col-span-6 sm:col-span-3">
                <span class="font-bold">Tension arterial:
                </span><span>{{ calcularTensionArterial(clinicaForm.get('pcta')?.value) }}</span>
              </div>
            </ng-container>
          </div>
        </ng-container>
        <!-- Grupos de checkbox -->
        <div class="md:col-span-6 sm:col-span-3">
          <div class="grid gap-0 md:grid-cols-6">
            <!-- Grupo de antecedentes familiares -->
            <div class="md:col-span-3">
              <h3 class="mt-4">Indica si el chico presenta alguno de los siguientes antecedentes familiares:</h3>
              <div class="flex flex-col mt-2">
                <app-input-checkbox label="Diabetes" [control]="controlDeInput('diabetes')" idInput="diabetes"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Hipertension Arterial" [control]="controlDeInput('hta')" idInput="hta"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Obesidad" [control]="controlDeInput('obesidad')" idInput="obesidad"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Consumo problematico de alcohol"
                  [control]="controlDeInput('consumo_alcohol')" idInput="consumo_alcohol"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Consumo problematico de drogas" [control]="controlDeInput('consumo_drogas')"
                  idInput="consumo_drogas" (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Consumo problematico de tabaco" [control]="controlDeInput('consumo_tabaco')"
                  idInput="consumo_tabaco" (change)="onChangeCheckbox($event)" />
              </div>
            </div>
            <!-- Grupo de antecedentes del chico -->
            <div class="md:col-span-3">
              <h3 class="mt-4">Indica si el chico tuvo alguna de las siguientes condiciones:</h3>
              <div class="flex flex-col mt-2">
                <app-input-checkbox label="Antecedentes Perinatales"
                  [control]="controlDeInput('antecedentes_perinatal')" idInput="antecedentes_perinatal"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Enfermedades Previas" [control]="controlDeInput('enfermedades_previas')"
                  idInput="enfermedades_previas" (change)="onChangeCheckbox($event)" />
              </div>
            </div>
            <!-- Grupo de consumos problemáticos
            <div class="md:col-span-3">
              <h3 class="mt-4">Indica si el chico tiene antecedentes familiares de consumos problemáticos de:</h3>
              <div class="flex flex-col mt-2">
                <app-input-checkbox label="Alcohol" [control]="controlDeInput('consumo_alcohol')"
                  idInput="consumo_alcohol" (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Drogas" [control]="controlDeInput('consumo_drogas')" idInput="consumo_drogas"
                  (change)="onChangeCheckbox($event)" />
                <app-input-checkbox label="Tabaco" [control]="controlDeInput('consumo_tabaco')" idInput="consumo_tabaco"
                  (change)="onChangeCheckbox($event)" />
              </div>
            </div>-->
            <!-- Grupo de lácteos -->
          </div>
        </div>
        <!-- Lacteos -->
        <h3 class="mt-4 md:col-span-6">Indica si el chico toma:</h3>
        <div class="mt-4 md:col-span-3">
          <app-input-select-enum label="Lacteos" [control]="controlDeInput('lacteos')" idInput="lacteos"
            [opciones]="['Si', 'No']" [valores]="['true', 'false']" />
        </div>
        <!-- Infusiones -->
        <div class="mt-4 md:col-span-3">
          <app-input-select-enum label="Infusiones" [control]="controlDeInput('infusiones')" idInput="infusiones"
            [opciones]="['Té', 'Mate Cocido', 'Otras(VER!!!!!!!)']" [valores]="['Té', 'Mate Cocido', 'Otras']" />
        </div>
        <!-- Vacunas -->
        <div class="mt-4 md:col-span-2">
          <app-input-select-enum label="Vacunas" [control]="controlDeInput('vacunas')" idInput="vacunas"
            [opciones]="['Completo', 'Incompleto', 'Desconocido']"
            [valores]="['Completo', 'Incompleto', 'Desconocido']" />
        </div>
        <!-- Tensión Arterial Sistolica (tas) -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Tensión Arterial Sistolica" [control]="controlDeInput('tas')" placeholder=""
            idInput="tas" />
        </div>
        <!-- Tensión Arterial Diastolica (tad) -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Tensión Arterial Diastolica" [control]="controlDeInput('tad')" placeholder=""
            idInput="tad" />
        </div>
        <!-- Examen Visual -->
        <div class="mt-4 md:col-span-2">
          <app-input-select-enum label="Examen Visual" [control]="controlDeInput('examen_visual')"
            idInput="examen_visual" [opciones]="['Normal', 'Anormal']" [valores]="['normal', 'anormal']" />
        </div>
        <!-- Ortopedia Traumatologia -->
        <div class="mt-4 md:col-span-2">
          <label for="ortopedia_traumatologia" class="block mb-4 text-sm font-medium text-gray-900">Ortopedia y
            Traumatologia</label>
          <select formControlName="ortopedia_traumatologia" id="ortopedia_traumatologia"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="normal">Normal</option>
            <option value="escoliosis">Escoliosis</option>
            <option value="piePlano">Pie Plano</option>
            <option value="otras">Otras(VER!!!!!!!!!!!!!!!)</option>
          </select>
          <div
            *ngIf="clinicaForm.get('ortopedia_traumatologia')?.errors && (clinicaForm.get('ortopedia_traumatologia')?.dirty || clinicaForm.get('ortopedia_traumatologia')?.touched)"
            class="text-red-600 text-sm">
            <div *ngIf="clinicaForm.get('ortopedia_traumatologia')?.errors?.['required']">Debe seleccionar una opción.
            </div>
          </div>
        </div>
        <!-- Lenguaje -->
        <div class="mt-4 md:col-span-2">
          <app-input-select-enum label="Lenguaje" [control]="controlDeInput('lenguaje')" idInput="lenguaje"
            [opciones]="['Adecuado', 'Inadecuado']" [valores]="['adecuado', 'inadecuado']" />
        </div>
        <!-- Alimentacion -->
        <div class="mt-4 md:col-span-2">
          <app-input-select-enum label="Alimentacion" [control]="controlDeInput('alimentacion')" idInput="alimentacion"
            [opciones]="['Mixta y variada', 'Rica en HdC', 'Pobre en fibras','Fiambres',' Frituras']"
            [valores]="['Mixta y variada', 'Rica en HdC','Pobre en fibras','Fiambres','Frituras']" />
        </div>
        <!-- Numero de Comidas -->
        <div class="mt-4 md:col-span-2">
          <app-input-number label="Número de Comidas" [control]="controlDeInput('numero_comidas')" placeholder=""
            idInput="numero_comidas" />
        </div>
        <!-- Hidratacion -->
        <div class="mt-4 md:col-span-2">
          <app-input-select-enum label="Hidratacion" [control]="controlDeInput('hidratacion')" idInput="hidratacion"
            [opciones]="['Agua', 'Bebidas edulcoradas']" [valores]="['Agua', 'Bebidas edulcoradas']" />
        </div>
        <h3 class="mt-4 md:col-span-6">Indica las horas diarias que el chico dedica a las siguientes actividades:</h3>
        <!-- Horas de Pantalla -->
        <div class="mt-4 md:col-span-2">
          <app-input-text label="Horas de Pantalla" [control]="controlDeInput('horas_pantalla')" placeholder="hh:mm"
            idInput="horas_pantalla" />
        </div>
        <!-- Horas de Juego al aire libre -->
        <div class="mt-4 md:col-span-2">
          <app-input-text label="Horas de Juego al aire libre" [control]="controlDeInput('horas_juego_airelibre')"
            placeholder="hh:mm" idInput="horas_juego_airelibre" />
        </div>
        <!-- Horas de sueño -->
        <div class="mt-4 md:col-span-2">
          <app-input-text label="Horas de sueño" [control]="controlDeInput('horas_suenio')" placeholder="hh:mm"
            idInput="horas_suenio" />
        </div>
        <!-- Proyecto
        <div class="mt-4 md:col-span-3">
          <app-input-text label="Proyecto" [control]="controlDeInput('proyecto')" placeholder="" idInput="proyecto" />
        </div> -->
        <!-- Seguimiento (segto) -->
        <div class="mt-4 md:col-span-3">
          <app-input-select-enum label="Necesita Seguimiento" [control]="controlDeInput('segto')" idInput="segto"
            [opciones]="['Si', 'No']" [valores]="['true', 'false']" />
        </div>
        <!-- Observaciones -->
        <div class="md:col-span-6">
          <app-input-textarea label="Observaciones" [control]="controlDeInput('observaciones')" placeholder=""
            idInput="observaciones" />
        </div>
      </div>
      <!-- Enviar -->
      <div class="flex mt-4">
        <button type="submit" [disabled]="!clinicaForm.valid"
          class="flex my-auto ml-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-3 py-2 text-center -700 -800 disabled:bg-gray-400">Agregar
        </button>
      </div>
    </form>
  </div>
</div>
