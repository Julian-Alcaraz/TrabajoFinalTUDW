<!-- Aca faltaria un mensaje de errro en el caso de que el id del chico no este en la bd pero sea valido -->
<div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden font-sans">
  <div class="layout-container flex h-full grow flex-col">
    <div class="px-10 flex flex-1 justify-center py-5">
      <div class="layout-content-container flex flex-col w-full flex-1">
        <div class="flex flex-wrap justify-between gap-3 p-4">
          <h3 class="text-black text-lg sm:text-xl font-bold leading-tight tracking-tight break-words max-w-full">Datos
            personales de {{chico?.apellido +' '+ chico?.nombre }}</h3>
        </div>
        <div class="flex flex-wrap gap-3 px-4 py-3">
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.nombre }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Nombre</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.apellido }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Apellido</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.dni }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">DNI</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.fe_nacimiento }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Fecha de Nacimiento</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.sexo }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Sexo</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.telefono }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Teléfono</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{
              chico?.barrio?.localidad?.nombre }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Localidad</p>
            </div>
          </div>
          <div
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.barrio?.nombre }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Barrio</p>
            </div>
          </div>
          <div *ngIf="chico?.nombre_madre"
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.nombre_madre }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Nombre Madre</p>
            </div>
          </div>
          <div *ngIf="chico?.nombre_padre"
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">{{ chico?.nombre_padre }}</p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">Nombre Padre</p>
            </div>
          </div>
          <div *ngIf="resultsLength > 0"
            class="flex min-w-28 flex-1 basis-auto flex-col gap-2 rounded-lg border border-gray-300 p-3 items-center text-center">
            <p class="text-black tracking-light text-2xl font-medium leading-tight">Consultas Asistidas en el año
              (podria ponerse abajo o en otro lado)
            </p>
            <div class="flex items-center gap-2">
              <p class="text-slate-500 text-sm font-normal leading-normal">{{ resultsLength }}</p>
            </div>
          </div>
        </div>
        <div *ngIf="resultsLength > 0; else noHayConsultas">
          <h3
            class="text-black text-lg sm:text-xl font-bold leading-tight tracking-tight break-words max-w-full px-2 sm:px-4 pb-2 pt-4">
            Historial de consultas
          </h3>
          <div class="px-4 py-3">
            <div class="scroll">
              <table mat-table [dataSource]="consultas" class="mat-elevation-z8 table-auto scroll">
                <!-- # -->
                <ng-container matColumnDef="numero">
                  <th mat-header-cell *matHeaderCellDef>#</th>
                  <td mat-cell *matCellDef="let consulta; let i = index">{{ i + 1 }}</td>
                </ng-container>
                <!-- Profesional -->
                <ng-container matColumnDef="profesional">
                  <th mat-header-cell *matHeaderCellDef>Profesional</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.usuario.nombre+' '+consulta.usuario.apellido }}
                  </td>
                </ng-container>
                <!-- Tipo -->
                <ng-container matColumnDef="tipo">
                  <th mat-header-cell *matHeaderCellDef>Tipo</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.type }}</td>
                </ng-container>
                <!-- Fecha -->
                <ng-container matColumnDef="fecha">
                  <th mat-header-cell *matHeaderCellDef>Fecha</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.created_at | date: 'dd-MM-yyyy' }}</td>
                </ng-container>
                <!-- Edad -->
                <ng-container matColumnDef="edad">
                  <th mat-header-cell *matHeaderCellDef>Edad</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.edad }}</td>
                </ng-container>
                <!-- Turno -->
                <ng-container matColumnDef="turno">
                  <th mat-header-cell *matHeaderCellDef>Turno</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.turno }}</td>
                </ng-container>
                <!-- Obra Social -->
                <ng-container matColumnDef="obra_social">
                  <th mat-header-cell *matHeaderCellDef>Obra Social</th>
                  <td mat-cell *matCellDef="let consulta">
                    <p *ngIf="!consulta.obra_social; else tieneObraSocial">-</p>
                    <ng-template #tieneObraSocial>{{ consulta.obra_social }}</ng-template>
                  </td>
                </ng-container>
                <!-- Curso-->
                <ng-container matColumnDef="curso">
                  <th mat-header-cell *matHeaderCellDef>Curso</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.curso.nombre }}</td>
                </ng-container>
                <!-- Institucion -->
                <ng-container matColumnDef="institucion">
                  <th mat-header-cell *matHeaderCellDef>Institucion</th>
                  <td mat-cell *matCellDef="let consulta">{{ consulta.institucion.tipo +' '+
                    consulta.institucion.nombre }}</td>
                </ng-container>
                <!-- Observaciones -->
                <ng-container matColumnDef="observaciones">
                  <th mat-header-cell *matHeaderCellDef>Observaciones</th>
                  <td mat-cell *matCellDef="let consulta">
                    <p *ngIf="!consulta.observaciones; else tieneObservaciones">-</p>
                    <ng-template #tieneObservaciones>{{ consulta.observaciones }}</ng-template>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="consultasColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: consultasColumns" (click)="obtenerConsulta(row.id)"
                  class="cursor-pointer hover:bg-gray-300"></tr>
              </table>
              <!-- Detalles -->
              <app-detalles-consulta [idConsulta]="idConsulta" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noHayConsultas>
    <h3 class="text-black text-xl font-bold leading-tight tracking-tight px-4 pb-2 pt-4">Historial de consultas</h3>
    <span>Este chico no tiene consultas cargadas</span>
  </ng-template>
